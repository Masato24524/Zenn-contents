---
title: "ã€æ¤œç´¢æ©Ÿèƒ½ã€ã®å®Ÿè£…ã‚’JavaScriptã€React(Nextjs)ã§æ¯”è¼ƒ"
emoji: "ğŸ“‘"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["JavaScript","React","Nextjs"]
published: true
date: "2025-08-29"
---

ãƒ–ãƒ­ã‚°å†…ã®æ¤œç´¢æ©Ÿèƒ½ã‚’JavaScript(Vanilla JS)ã€Reactï¼ˆNextjsï¼‰ãã‚Œãã‚Œã§å®Ÿè£…ã—ã¦ã¿ã¾ã™ã€‚

https://www.masato-tech-blog.com/

ç­†è€…ã¯Reactï¼ˆNextjsï¼‰ã‹ã‚‰å…¥ã£ãŸãŸã‚Vanilla JSã®çµŒé¨“ãŒä¹ã—ãã€
ã‚ãˆã¦Vanilla JSã‚’ä½¿ã†ã“ã¨ã§ã€Reactï¼ˆNextjsï¼‰ã‚’ä½¿ãˆã‚‹ã“ã¨ã®ãƒ¡ãƒªãƒƒãƒˆã‚’å®Ÿæ„Ÿã™ã‚‹ã®ãŒç›®çš„ã¨ãªã‚Šã¾ã™ã€‚

## ç›®æ¬¡
1. å…¨ä½“ã®æ¯”è¼ƒ
2. JavaScript(Vanilla JS)ã§ã®å®Ÿè£…
3. Reactã§ã®å®Ÿè£…
4. çµæœæ•´ç†
5. ã•ã„ã”ã«

## 1. å…¨ä½“ã®æ¯”è¼ƒ

**<å…¨ä½“ã®ã‚¤ãƒ¡ãƒ¼ã‚¸>**

Vanilla JSç‰ˆ: jsã‚¹ã‚¯ãƒªãƒ—ãƒˆã§å®Ÿè£… â†’ æ¤œç´¢å®Ÿè¡Œ â†’ çµæœã‚’Next.jsã«æ¸¡ã™

Reactç‰ˆ:     Hooksã§å®Ÿè£… â†’ æ¤œç´¢å®Ÿè¡Œ â†’ çµæœã‚’Next.jsã«æ¸¡ã™

Next.jsç‰ˆ:   SSG/SSR + æœ€é©åŒ–æ©Ÿèƒ½ã§å®Ÿè£… â†’ æ¤œç´¢å®Ÿè¡Œ â†’åŒä¸€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§å®Œçµ

|æ©Ÿèƒ½|Vanilla JS|React|Next.js
|---|---|---|---|
|æ¤œç´¢å®Ÿè¡Œ|DOMæ“ä½œ + ã‚¤ãƒ™ãƒ³ãƒˆ|useState + onClick|useMemo + è‡ªå‹•å®Ÿè¡Œ|
|çµæœè¡¨ç¤º|å¤–éƒ¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ|å¤–éƒ¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ|åŒä¸€ + å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆ|
|URLç®¡ç†|ãªã—|ãªã—|router.push|
|ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹|ç”ŸJavaScript|Reactæœ€é©åŒ–|ãƒ¡ãƒ¢åŒ– + ã‚³ãƒ¼ãƒ‰åˆ†å‰²|
|SEOå¯¾å¿œ|ãªã—|ãªã—|URL|
|åŒæœŸãƒ–ãƒ©ã‚¦ã‚¶å±¥æ­´|ãªã—|ãªã—|è‡ªå‹•å¯¾å¿œ|


**<ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¯”è¼ƒ>**

- åˆæœŸè¡¨ç¤ºé€Ÿåº¦
Vanilla JS:  HTMLèª­ã¿è¾¼ã¿ â†’ JSèª­ã¿è¾¼ã¿ â†’ CSSèª­ã¿è¾¼ã¿ â†’ API â†’ è¡¨ç¤º
React:       HTMLèª­ã¿è¾¼ã¿ â†’ å³åº§ã«è¡¨ç¤ºï¼ˆãƒ‡ãƒ¼ã‚¿ã¯å¾Œã‹ã‚‰ï¼‰
Next.js:     HTMLèª­ã¿è¾¼ã¿ â†’ ãƒ‡ãƒ¼ã‚¿è¾¼ã¿ã§å³åº§ã«è¡¨ç¤º

- æ¤œç´¢å®Ÿè¡Œé€Ÿåº¦ï¼ˆå®Ÿæ¸¬ã§ã¯ãªãã€ã‚¤ãƒ¡ãƒ¼ã‚¸ä¾‹ï¼‰
Vanilla JS:  500ms (ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¾å­˜)
React:       100ms + ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿æ™‚é–“
Next.js:     50ms (ãƒ“ãƒ«ãƒ‰æ™‚æœ€é©åŒ–)

**<æŠ€è¡“é¸æŠã®åˆ¤æ–­åŸºæº–>**
ç°¡å˜ãªæ©Ÿèƒ½   â†’ Vanilla JS

UIçŠ¶æ…‹ç®¡ç†ãŒè¤‡é›‘         â†’ React

SEO + ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹é‡è¦–  â†’ Next.js

Next.jsã®æ–¹ãŒåˆæœŸå­¦ç¿’ã‚³ã‚¹ãƒˆã¯é«˜ã„ã§ã™ãŒã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹é¢ã§ã¯åœ§å€’çš„ã«æœ‰åˆ©




---


## 2. JavaScriptã§ã®å®Ÿè£…ä¾‹

å‰æã¨ã—ã¦ã€ãƒ•ã‚¡ã‚¤ãƒ«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¯ãƒ–ãƒ­ã‚°ã‚µã‚¤ãƒˆã®ãƒ™ãƒ¼ã‚¹ã¨ãªã£ã¦ã„ã‚‹Nextjs14ã®appãƒ«ãƒ¼ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
ãã®ãŸã‚æœ¬å½“ã®Vanilla JSã¨å·®ç•°ãŒã‚ã‚‹ç‚¹ã¯ã”æ‰¿çŸ¥ãŠããã ã•ã„ã€‚

å…¨ä½“ã®æµã‚Œã¨ã—ã¦ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
- æ¤œç´¢ç”¨ã®å…ƒè¨˜äº‹ãƒ‡ãƒ¼ã‚¿ã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ç”Ÿæˆï¼ˆapp/publicãƒ•ã‚©ãƒ«ãƒ€ä»¥ä¸‹ã«ä¿å­˜ï¼‰
ã€€â€»ã“ã®ä½œæ¥­ã¯SSGã§ãƒ“ãƒ«ãƒ‰ã®éš›ã«å®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚
â†“
- æ¤œç´¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§JSã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ï¼ˆæ¤œç´¢ãƒœã‚¿ãƒ³æŠ¼ä¸‹ã§æ¤œç´¢çµæœãƒšãƒ¼ã‚¸ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼‰
â†“
- æ¤œç´¢çµæœãƒšãƒ¼ã‚¸ã§æ¤œç´¢å‡¦ç†ã‚’å®Ÿè¡Œï¼†æ¤œç´¢çµæœã‚’è¡¨ç¤º

ä»¥ä¸‹ã«ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šä»˜ã‘ã¦ãŠãã¾ã™ãŒã€æœ€ä½é™ã®æ©Ÿèƒ½ã—ã‹å®Ÿè£…ã—ã¦ã„ãªã„ã®ã§ã ã„ã¶é›‘ã§ã™ã€‚ã€‚ã€‚ï¼ˆã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚‚ãªã—ï¼‰

### æ¤œç´¢ç”¨ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

![alt text](/images/22488fcdf8c2fa/image-1.png)

~~~javascript
SearchJavascript.tsx

// æ¤œç´¢ç”¨ã®å…ƒè¨˜äº‹ãƒ‡ãƒ¼ã‚¿ã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ç”Ÿæˆ
export async function createJsonPosts() {
  const allPostsData = await fetchAllGithubArticles();

  // public/data/search.jsonã¨ã—ã¦ä¿å­˜
  const publicDir = path.join(process.cwd(), "public", "data");
  console.log("publicDir", publicDir);

  fs.writeFileSync(
    path.join(publicDir, "search.json"),
    JSON.stringify(allPostsData, null, 2)
  );
}

(async () => {
  await createJsonPosts();
})();

// æ¤œç´¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§JSã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿
const searchJavascript = ({ posts }: Props) => {
  // console.log("posts of SearchJS", posts);

  return (
    <>
      <h2>Vanilla JSã«ã‚ˆã‚‹æ¤œç´¢</h2>
      <div className="flex w-auto h-8 mb-4">
        <div id="javascript-search-container" className="w-full shadow-md">
          æ¤œç´¢çª“ç¢ºèªç”¨
        </div>

        {/* JavaScriptå®Ÿè¡Œ(ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿) */}
        <Script src="/js/javascript-search.js" strategy="afterInteractive" />
      </div>
    </>
  );
};
~~~

### æ¤œç´¢çµæœãƒšãƒ¼ã‚¸

![alt text](/images/22488fcdf8c2fa/image-2.png)

~~~javascript
SearchResults.tsx

// æ¤œç´¢çµæœãƒšãƒ¼ã‚¸ã§æ¤œç´¢å‡¦ç†ã‚’å®Ÿè¡Œï¼†æ¤œç´¢çµæœã‚’è¡¨ç¤º
const SearchReasults = ({ filterdPosts }: any) => {
  console.log("filterdPosts", filterdPosts);
  return (
    <div className="flex w-full mx-auto">
      <div id="search-results-js" className="w-full shadow-md">
        JSã«ã‚ˆã‚‹æ¤œç´¢çµæœ
      </div>

      {/* JavaScriptå®Ÿè¡Œ */}
      <Script src="/js/javascript-search.js" strategy="afterInteractive" />
    </div>
  );
};

~~~

### JSã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«

~~~javascript
javascript-search.js

(function () {
  let posts = [];

  function loadCSS() {
    const link = document.createElement("link");
    link.rel = "stylesheet";
    link.href = "/css/javascript-search.css";
    document.head.appendChild(link);
    console.log("CSS loaded");
  }

  async function loadPosts() {
    const res = await fetch("/data/search.json");
    const posts = await res.json();
    console.log("posts", posts);
    return posts;
  }

  // æ¤œç´¢ãƒãƒ¼ã§ã®åˆæœŸåŒ–
  function initSearchBar() {
    loadCSS();

    const container = document.getElementById("javascript-search-container");
    if (!container) return;

    // æ¤œç´¢UIã®HTMLæ§‹é€ ã‚’å‹•çš„ç”Ÿæˆ
    container.innerHTML = `
        <div class="vanilla-search-form">
          <input type="text" id="search-input" placeholder="æ¤œç´¢...">
          <button id="search-button-js" type="button">æ¤œç´¢</button>
        </div>
        `;

    setupSearchBarEvents();
  }

  // æ¤œç´¢å®Ÿè¡Œï¼†çµæœè¡¨ç¤ºãƒšãƒ¼ã‚¸ã§ã®åˆæœŸåŒ–
  async function initSearchPage() {
    loadCSS();

    // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’å–å¾—
    const urlParams = new URLSearchParams(window.location.search);
    const query = urlParams.get("q");
    console.log("perform query:", query);

    const result = await loadPosts();
    posts = result;
    console.log("loadPostså®Œäº†æ™‚ã®posts:", posts.length);
    performSearch(posts, query);
  }

  // æ¤œç´¢ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸæ™‚ç‚¹ã§ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
  function clickSearch() {
    const searchInput = document.getElementById("search-input");

    const query = searchInput.value.toLowerCase().trim();
    if (query) {
      // æ¤œç´¢çµæœãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ

      console.log("query", query);
      location.href = `/search?q=${encodeURIComponent(query)}`;
    }
  }

  // æ¤œç´¢ãƒãƒ¼ã§ã®ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
  function setupSearchBarEvents() {
    const searchButton = document.getElementById("search-button-js");

    // ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
    if (searchButton) {
      searchButton.addEventListener("click", clickSearch);
    }
  }

  // æ¤œç´¢å®Ÿè¡Œé–¢æ•°
  async function performSearch(posts, query) {
    console.log("=== performSearché–‹å§‹ ===");
    console.log("postsé…åˆ—:", posts);
    console.log("æ¤œç´¢query:", query);

    const filtered = posts.filter((post) =>
      post.title.toLowerCase().includes(query)
    );
    console.log("filtered", filtered);

    const searchResults = document.getElementById("search-results-js");
    if (!searchResults) return;

    // æ¤œç´¢çµæœã®HTMLæ§‹é€ ã‚’å‹•çš„ç”Ÿæˆ
    const resultsHTML = filtered
      .map((post) => `<h3>${post.title}</h3>`)
      .join("");

    searchResults.innerHTML = `
        <div>
          <div id="search-results-js">${resultsHTML}</div>
        </div>
        `;
  }

  // DOMãŒå®Œå…¨ã«èª­ã¿è¾¼ã¾ã‚Œã¦ã‹ã‚‰å®Ÿè¡Œ
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", initJavaScriptSearch);
  } else {
    //ã™ã§ã«èª­ã¿è¾¼ã¿æ¸ˆã¿ã®å ´åˆã¯å³å®Ÿè¡Œ
    initSearchBar();
    initSearchPage();
  }
})();

~~~

## 3. Reactã§ã®å®Ÿè£…

æœ€å¾Œã«Reactã§ã®å®Ÿè£…ç”»é¢ã§ã™ã€‚
å®Ÿéš›ã®ãƒ–ãƒ­ã‚°ã‚µã‚¤ãƒˆã§ã¯ã“ã¡ã‚‰ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚
æ¤œç´¢çµæœç”»é¢ã‚‚ã€ç¾åœ¨ã®ãƒ–ãƒ­ã‚°ã®è¡¨ç¤ºã«ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’åˆã‚ã›ã¾ã—ãŸã€‚

ï¼ˆè£œè¶³ï¼‰
ã“ã¡ã‚‰ã¯å‹•çš„ãƒšãƒ¼ã‚¸ãªã®ã§SSRã§å®Ÿè£…ã—ãŸã®ã§ã™ãŒã€
Google Analyticsã®APIãŒNode.jsæ¨™æº–ã§ã€Cloudflare pagesã®runtime edgeã§ã¯ä½¿ãˆãªã„ãŸã‚ã€äººæ°—è¨˜äº‹ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯é™¤å¤–ã—ãªã„ã¨ã„ã‘ãªã‹ã£ãŸã§ã™ã€‚

![alt text](/images/22488fcdf8c2fa/image-3.png)

~~~React
// æ¤œç´¢Boxã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
Search.tsx

"use client";

import React, { useState } from "react";
import SearchIcon from "@mui/icons-material/Search";

const Search = () => {
  const [inputSearch, setInputSearch] = useState<string>("");

  // æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã®å†…å®¹ã‚’å–å¾—
  const handleInputChange = (
    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>
  ) => {
    setInputSearch(e.target.value);
    console.log("inputSearch:", inputSearch);
  };

  const handleClickSearch = () => {
    const searchWord = inputSearch.toLocaleLowerCase().trim();
    // ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå‡¦ç†
    window.location.href = `/search?q=${encodeURIComponent(searchWord)}`;
  };

  return (
    <div id="search-container" className="flex w-full h-8 mb-4">
      <input
        id="search-input"
        className="w-full shadow-md mr-2"
        type="text"
        placeholder=" ã‚µã‚¤ãƒˆå†…æ¤œç´¢"
        value={inputSearch}
        onChange={handleInputChange}
      />

      <button
        id="search-icon"
        className="w-10 bg-white shadow-md border-gray-700"
        onClick={handleClickSearch}
      >
        <SearchIcon />
      </button>
    </div>
  );
};

export default Search;
~~~


~~~React
// æ¤œç´¢å‡¦ç†ï¼†æ¤œç´¢çµæœã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆæ¤œç´¢å‡¦ç†ã®éƒ¨åˆ†ã®ã¿ã‚’æŠœç²‹ï¼‰
SearchResults.tsx

"use client";

// import Script from "next/script";
import React from "react";
import { useSearchParams } from "next/navigation";
import Link from "next/link";
import { AccessTime, Folder, Update } from "@mui/icons-material";
import SafeHtml from "app/utils/sanitizeHtml";

const SearchReasults = ({ allPostsData }: any) => {
  // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’å–å¾—
  const urlParams = useSearchParams();
  const query = urlParams.get("q");

  // æ¤œç´¢ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ä¸€è‡´ã™ã‚‹è¨˜äº‹ã‚’æŠ½å‡º
  const filteredPosts: any = query
    ? allPostsData.filter((post: any) => {
        const title = post.title?.toLowerCase() || "";
        const content = post.content?.toLowerCase() || "";
        const searchQuery = query.toLowerCase();

        return title.includes(searchQuery) || content.includes(searchQuery);
      })
    : null;
~~~

## 4. çµè«–çš„ãªã‚‚ã®ã€‚å®Ÿéš›ã«ã‚„ã£ã¦ã¿ã¦ã€è‡ªèº«ã®ç†è§£å†…å®¹ã®æ•´ç†
å…ƒã®ç†è§£
ãƒ»JSã¨Reactã§ã¯æ¤œç´¢ãƒ­ã‚¸ãƒƒã‚¯ã«å·®ãŒå‡ºã‚‹ï¼ˆReactã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãªã©ãŒä½¿ãˆã‚‹ï¼‰ã€ã¨æ€ã£ã¦ã„ãŸã€‚

å­¦ç¿’å¾Œã®ç†è§£
ãƒ»æ¤œç´¢ãƒ­ã‚¸ãƒƒã‚¯éƒ¨åˆ†ã§ã¯å·®ã¯ã§ãªã„ï¼ˆfilterãƒ¡ã‚½ãƒƒãƒ‰ã¯åŒã˜ï¼‰
ãƒ»JSã¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ï¼ˆCSSå«ã‚€ï¼‰ãŒå¿…è¦ãªãŸã‚ã€è¡¨ç¤ºæ™‚é–“ãŒReactã‚„Next.jsã«æ¯”ã¹ã¦é…ããªã‚‹
ãƒ»ä»Šå›ã¯å˜ç´”ãªæ©Ÿèƒ½ã®ãŸã‚ã€Reactã®çŠ¶æ…‹ç®¡ç†ãªã©ã®éƒ¨åˆ†ã§ãƒ¡ãƒªãƒƒãƒˆãŒå®Ÿæ„Ÿã—ã«ãã„

## ã•ã„ã”ã«
ç§ã®ã‚ˆã†ã«Reactã§ã¯æ›¸ã‘ã‚‹ã‘ã©ã€JavaScriptã‚ªãƒ³ãƒªãƒ¼ã§ã¯æ›¸ã‘ãªã„ã€ã¨ã„ã†äººã‚‚çµæ§‹ã„ã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿï¼ˆãƒ»ãƒ»ãƒ»ã„ã‚‹ã‹ãªï¼Ÿï¼‰

Reactã‚„Next.jsãŒè£ã§ã©ã®ã‚ˆã†ã«å‹•ã„ã¦ã„ã‚‹ã®ã‹ç†è§£ã™ã‚‹ãŸã‚ã«ã€ãƒ™ãƒ¼ã‚¹ã«ãªã£ã¦ã„ã‚‹æŠ€è¡“ã‚’å­¦ã³ç›´ã™ã“ã¨ã‚‚å¤§äº‹ã ã¨æ€ã„ãƒˆãƒ©ã‚¤ã—ã¦ã¿ã¾ã—ãŸã€‚

